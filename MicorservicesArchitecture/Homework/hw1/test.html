<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Toy Semantic Code Search — 简化版</title>
<style>
  :root{
    --bg:#f6f9ff;
    --card:#ffffff;
    --accent:#2b6cb0;
    --muted:#6b7280;
  }
  html,body{
    height:100%;
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  }
  body{
    background:linear-gradient(180deg,#e9f2ff 0%,var(--bg) 100%);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    padding:40px;
  }

  .app {
    width:800px;max-width:95vw;
    background:var(--card);
    border-radius:14px;
    box-shadow:0 6px 20px rgba(20,30,60,0.1);
    border:1px solid rgba(16,24,40,0.05);
    padding:24px;
  }

  h1 {
    text-align:center;
    margin:0 0 16px 0;
    color:var(--accent);
    font-size:22px;
  }

  .search-area{
    display:flex;
    gap:8px;
    margin-bottom:20px;
    flex-wrap:wrap;
  }
  .search-area input{
    flex:1;
    padding:12px;
    border-radius:8px;
    border:1px solid rgba(12,24,64,0.1);
    font-size:15px;
  }
  .search-area select{
    padding:12px;
    border-radius:8px;
    border:1px solid rgba(12,24,64,0.1);
    font-size:15px;
    background:white;
  }
  .search-area button{
    padding:12px 20px;
    border:none;
    border-radius:8px;
    background:linear-gradient(180deg,var(--accent),#1f4f8a);
    color:#fff;
    cursor:pointer;
    font-weight:600;
  }

  .results{
    display:flex;
    flex-direction:column;
    gap:16px;
  }

  .panel{
    background:#fff;
    border-radius:10px;
    padding:14px;
    border:1px solid rgba(12,24,64,0.05);
  }

  .panel h3{
    margin:0 0 10px 0;
    color:var(--accent);
    font-size:16px;
  }

  .code-block{
    background:#0b1220;
    color:#e6eef8;
    padding:10px;
    border-radius:8px;
    font-family:Consolas,monospace;
    font-size:13px;
    white-space:pre-wrap;
    overflow:auto;
  }

  .resource-list{
    list-style:none;
    padding:0;
    margin:0;
  }
  .resource-item{
    background:#f8fbff;
    border:1px solid rgba(12,24,64,0.05);
    border-radius:8px;
    padding:8px;
    margin-bottom:8px;
    font-size:14px;
  }
  .resource-item a{
    color:var(--accent);
    text-decoration:none;
  }
</style>
</head>
<body>
  <div class="app">
    <h1>Toy Semantic Code Search</h1>
    <div class="search-area">
      <input id="userInput" placeholder="输入你的编程需求（自然语言）...">
      <select id="langSelect">
        <option value="auto">自动识别语言</option>
        <option value="python">Python</option>
        <option value="java">Java</option>
        <option value="cpp">C++</option>
        <option value="javascript">JavaScript</option>
      </select>
      <button id="searchBtn">搜索</button>
    </div>

    <div id="results" class="results">
      <div style="color:var(--muted)">请输入需求后点击“搜索”，并选择语言。<br>需求示例："读取 CSV" 或 "解析 XML"。</div>
    </div>
  </div>

<script>
const MOCK = {
  python: [
    {
      title: "用 Pandas 读取 CSV 文件",
      snippet: `import pandas as pd

df = pd.read_csv('data.csv')
print(df.head())
print(df['amount'].sum())`
    }
  ],
  java: [
    {
      title: "用 Jackson 解析 XML",
      snippet: `import com.fasterxml.jackson.dataformat.xml.XmlMapper;

public class XmlExample {
  public static void main(String[] args) throws Exception {
    XmlMapper xmlMapper = new XmlMapper();
    String xml = "<User><name>Tom</name><age>20</age></User>";
    User user = xmlMapper.readValue(xml, User.class);
    System.out.println(user.getName());
  }
}`
    }
  ],
  cpp: [
    {
      title: "C++ 文件读取示例",
      snippet: `#include <fstream>
#include <iostream>
#include <string>
using namespace std;

int main(){
  ifstream file("data.txt");
  string line;
  while(getline(file, line)){
    cout << line << endl;
  }
}`
    }
  ]
};

document.getElementById('searchBtn').addEventListener('click', ()=>{
  const q = document.getElementById('userInput').value.trim();
  const lang = document.getElementById('langSelect').value;
  const res = document.getElementById('results');
  if(!q){
    alert('请输入搜索内容');
    return;
  }
  res.innerHTML = `<div style="color:var(--muted)">正在搜索「${q}」（语言：${lang}）...</div>`;
  setTimeout(()=>{
    renderMockResults(lang, q);
  },600);
});

function renderMockResults(lang, q){
  const res = document.getElementById('results');
  const list = MOCK[lang] || MOCK.python;
  let html = `
  <div class="panel">
    <h3>代码示例（${lang}）</h3>
    ${list.map(ex=>`
      <div style="margin-bottom:12px">
        <strong>${ex.title}</strong>
        <div class="code-block">${ex.snippet}</div>
      </div>
    `).join('')}
  </div>

  <div class="panel">
    <h3>参考资源</h3>
    <ul class="resource-list">
      <li class="resource-item"><a href="https://stackoverflow.com" target="_blank">StackOverflow 搜索结果</a></li>
      <li class="resource-item"><a href="https://github.com" target="_blank">GitHub 代码示例</a></li>
    </ul>
  </div>`;
  res.innerHTML = html;
}
</script>
</body>
</html>
