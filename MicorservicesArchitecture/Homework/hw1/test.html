<!DOCTYPE html>
<html>
<head>
    <title>Semantic Source Code Search</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #fff;
        }
        .browser-frame {
            width: 900px;
            margin: 50px auto;
            border: 2px solid #000;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        .browser-header {
            background-color: #ccc;
            padding: 10px;
            display: flex;
            align-items: center;
        }
        .browser-nav {
            margin-right: 10px;
        }
        .browser-nav button {
            background: none;
            border: 1px solid #000;
            padding: 5px 10px;
            margin-right: 5px;
            cursor: pointer;
        }
        .browser-url {
            flex: 1;
            height: 30px;
            border: 1px solid #000;
            padding: 0 10px;
        }
        .browser-search-btn {
            background: none;
            border: 1px solid #000;
            padding: 5px 10px;
            cursor: pointer;
        }
        .page-content {
            padding: 20px;
        }
        .search-area {
            display: flex;
            margin-bottom: 20px;
        }
        .search-input {
            flex: 1;
            height: 30px;
            border: 1px solid #000;
            padding: 0 10px;
            margin-right: 10px;
        }
        .search-btn {
            background: none;
            border: 1px solid #000;
            padding: 5px 10px;
            cursor: pointer;
        }
        .example-note {
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 150px;
            margin-right: 20px;
        }
        .tag-cloud {
            margin-bottom: 20px;
        }
        .tag {
            margin-right: 5px;
            cursor: pointer;
        }
        .tag.large {
            font-size: 18px;
            font-weight: bold;
        }
        .tag.medium {
            font-size: 15px;
        }
        .tag.small {
            font-size: 12px;
            color: #666;
        }
        .popular-articles {
            border: 1px solid #000;
            padding: 10px;
            width: 300px;
        }
        .settings {
            position: absolute;
            top: 200px;
            right: 200px;
            border: 1px solid #000;
            padding: 5px 10px;
            cursor: pointer;
        }
        .settings-note {
            position: absolute;
            top: 180px;
            right: 50px;
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 200px;
        }
        .tag-cloud-note {
            position: absolute;
            top: 300px;
            right: 100px;
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 250px;
        }
        .popular-note {
            position: absolute;
            top: 400px;
            right: 200px;
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 250px;
        }

        /* Result Page Styles */
        .result-header {
            margin-bottom: 20px;
        }
        .find-again-btn {
            float: right;
            background: none;
            border: 1px solid #000;
            padding: 5px 10px;
            cursor: pointer;
        }
        .result-sections {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .result-section {
            width: 48%;
            border: 1px solid #000;
            padding: 10px;
            margin-bottom: 20px;
        }
        .source-note {
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 200px;
            position: absolute;
            top: 300px;
            right: 300px;
        }
        .article-note {
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 200px;
            position: absolute;
            top: 300px;
            right: 50px;
        }
        .content-note {
            background-color: #fceabb;
            border: 1px solid #000;
            padding: 10px;
            width: 300px;
            position: absolute;
            top: 400px;
            right: 200px;
        }
    </style>
</head>
<body>
    <div class="browser-frame">
        <div class="browser-header">
            <div class="browser-nav">
                <button>&lt;</button>
                <button>&gt;</button>
                <button>X</button>
                <button>^</button>
            </div>
            <input type="text" class="browser-url" value="https://semantic-source-code-search">
            <button class="browser-search-btn">🔍</button>
        </div>
        <div class="page-content" id="start-page">
            <div class="example-note">
                example:<br>
                用Jackson解析XML<br>
                读取CSV文件
            </div>
            <div class="search-area">
                <input type="text" class="search-input" id="userInput" placeholder="输入需求（如：用Jackson解析XML）">
                <button class="search-btn" id="searchBtn">搜索</button>
            </div>
            <div class="tag-cloud">
                <span class="tag large">Python</span>
                <span class="tag large">Java</span>
                <span class="tag medium">JavaScript</span>
                <span class="tag medium">C#</span>
                <span class="tag small">CSV</span>
                <span class="tag medium">XML</span>
                <span class="tag medium">JSON</span>
                <span class="tag small">Jackson</span>
                <span class="tag medium">教程</span>
                <span class="tag medium">示例</span>
            </div>
            <div class="popular-articles">
                热门示例1：用Python读取CSV<br>
                热门示例2：用Java解析XML<br>
                热门示例3：...
            </div>
            <div class="settings">Settings</div>
            <div class="settings-note">
                Settings:<br>
                1. 编程语言<br>
                2. 数据源/API配置<br>
                3. 过滤器
            </div>
            <div class="tag-cloud-note">
                标签云关联代码示例
            </div>
            <div class="popular-note">
                热门代码示例和教程
            </div>
        </div>
        <div class="page-content" id="result-page" style="display: none;">
            <div class="result-header">
                <span id="search-query">请输入搜索需求</span>
                <button class="find-again-btn">再次搜索...</button>
            </div>
            <div class="result-sections">
                <div class="result-section">
                    <h3>源代码示例</h3>
                    <div id="codeExamples">
                        <!-- 代码示例将在这里动态生成 -->
                    </div>
                </div>
                <div class="result-section">
                    <h3>参考博客/文章</h3>
                    <div id="referenceArticles">
                        <!-- 参考文章将在这里动态生成 -->
                    </div>
                </div>
                <div class="result-section">
                    <h3>教程</h3>
                    <div id="tutorials">
                        <!-- 教程将在这里动态生成 -->
                    </div>
                </div>
                <div class="result-section">
                    <h3>文档</h3>
                    <div id="documents">
                        <!-- 文档将在这里动态生成 -->
                    </div>
                </div>
                <div class="result-section">
                    <h3>示例项目</h3>
                    <div id="sampleProjects">
                        <!-- 示例项目将在这里动态生成 -->
                    </div>
                </div>
            </div>
            <div class="source-note">
                潜在来源:<br>
                GitHub<br>
                公共代码仓库<br>
                .....
            </div>
            <div class="article-note">
                潜在来源:<br>
                StackOverflow<br>
                公共搜索引擎<br>
                .....
            </div>
            <div class="content-note">
                可通过现有API访问的<br>
                任何有用内容
            </div>
        </div>
    </div>

    <script>
        // 模拟数据
        const mockStackOverflow = {
            python: `import csv\n# 读取CSV文件并打印内容\nwith open('data.csv', 'r', encoding='utf-8') as f:\n    reader = csv.DictReader(f)\n    for row in reader:\n        print(f"姓名：{row['name']}，年龄：{row['age']}")`,
            java: `import com.fasterxml.jackson.databind.ObjectMapper;\n// 用Jackson解析XML\npublic class XmlParser {\n    public static void main(String[] args) throws Exception {\n        ObjectMapper mapper = new ObjectMapper();\n        User user = mapper.readValue(new File("user.xml"), User.class);\n        System.out.println(user.getName());\n    }\n}`,
            source: "Stack Overflow（模拟）"
        };

        const mockDevTo = {
            python: { title: "Python CSV处理从入门到精通", url: "https://dev.to/example/python-csv-guide（模拟）" },
            java: { title: "Jackson XML解析实战教程", url: "https://dev.to/example/java-jackson-xml（模拟）" },
            javascript: { title: "JavaScript读取JSON文件教程", url: "https://dev.to/example/js-json-guide（模拟）" },
            source: "Dev.to（模拟）"
        };

        const mockTutorial = {
            python: { title: "Python官方CSV模块文档", url: "https://docs.python.org/3/library/csv.html" },
            java: { title: "Jackson官方XML解析指南", url: "https://github.com/FasterXML/jackson-dataformat-xml（模拟）" },
            source: "官方教程/文档（模拟）"
        };

        const searchBtn = document.getElementById('searchBtn');
        const userInput = document.getElementById('userInput');
        const startPage = document.getElementById('start-page');
        const resultPage = document.getElementById('result-page');
        const searchQuery = document.getElementById('search-query');
        const findAgainBtn = document.querySelector('.find-again-btn');
        const codeExamples = document.getElementById('codeExamples');
        const referenceArticles = document.getElementById('referenceArticles');
        const tutorials = document.getElementById('tutorials');
        const documents = document.getElementById('documents');
        const sampleProjects = document.getElementById('sampleProjects');

        searchBtn.addEventListener('click', async () => {
            const query = userInput.value.trim();
            if (query) {
                searchQuery.textContent = query;
                startPage.style.display = 'none';
                resultPage.style.display = 'block';

                const selectedLang = "python"; // 这里可以根据实际需求获取选择的编程语言
                try {
                    // 1. 语义解析（模拟）
                    const coreIntent = "编程功能实现";
                    const keywords = `需求解析：编程语言=${selectedLang}，核心功能=${coreIntent}，关键词=${query.split(' ').slice(0, 3).join(', ')}`;

                    // 2. GitHub API搜索（模拟）
                    const githubCodeLink = "https://github.com/sample/repo";
                    const githubRepo = "sample/repo";
                    const githubCodeSnippet = `// 来自GitHub仓库：${githubRepo}\n// 完整代码请访问：${githubCodeLink}`;

                    // 生成代码示例
                    codeExamples.innerHTML = `
                        <p>/***GitHub代码示例***/</p>
                        <pre>${githubCodeSnippet}</pre>
                        <p>/***Stack Overflow代码示例***/</p>
                        <pre>${mockStackOverflow[selectedLang] || mockStackOverflow.python}</pre>
                        <p>/***基础功能示例***/</p>
                        <pre>${getBasicCodeExample(selectedLang, query)}</pre>
                    `;

                    // 生成参考文章
                    referenceArticles.innerHTML = `
                        <p><a href="${mockDevTo[selectedLang].url}" target="_blank">${mockDevTo[selectedLang].title}</a>（来源：${mockDevTo.source}）</p>
                    `;

                    // 生成教程
                    tutorials.innerHTML = `
                        <p><a href="${mockTutorial[selectedLang].url}" target="_blank">${mockTutorial[selectedLang].title}</a>（来源：${mockTutorial.source}）</p>
                    `;

                    // 文档和示例项目可根据需求扩展
                    documents.innerHTML = "<p>暂无文档</p>";
                    sampleProjects.innerHTML = "<p>暂无示例项目</p>";

                } catch (error) {
                    codeExamples.innerHTML = `<p style='color:red'>搜索失败：${error.message}</p>`;
                }
            }
        });

        findAgainBtn.addEventListener('click', () => {
            resultPage.style.display = 'none';
            startPage.style.display = 'block';
            userInput.value = '';
        });

        function getBasicCodeExample(lang, input) {
            switch(lang) {
                case "python":
                    return input.includes("CSV") ? `import pandas as pd\n# 用Pandas快速读取CSV\ndf = pd.read_csv('data.csv')\nprint(df.head())` : 
                                                  `# Python基础示例：创建列表并遍历\nmy_list = [1, 2, 3, 4]\nfor item in my_list:\n    print(item * 2)`;
                case "java":
                    return input.includes("Jackson") ? `import com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n// Jackson JSON解析示例\npublic class JsonParser {\n    public static void main(String[] args) throws JsonProcessingException {\n        ObjectMapper mapper = new ObjectMapper();\n        String json = "{\\\"name\\\":\\\"Tom\\\",\\\"age\\\":20}";\n        Person p = mapper.readValue(json, Person.class);\n        System.out.println(p.getName());\n    }\n}` :
                                                     `// Java基础示例：创建数组并遍历\npublic class ArrayExample {\n    public static void main(String[] args) {\n        int[] arr = {1, 2, 3};\n        for (int num : arr) {\n            System.out.println(num);\n        }\n    }\n}`;
                default:
                    return `// ${lang}基础示例\nconsole.log("${input}功能实现");`;
            }
        }
    </script>
</body>
</html>