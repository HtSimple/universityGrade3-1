<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>豆包 API 问答示例</title>
  <style>
    body { margin:0; font-family:sans-serif; background:#f5f8fa; padding:20px; }
    .container { max-width:800px; margin:0 auto; background:#fff; padding:24px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
    .search-area { display:flex; gap:8px; margin-bottom:20px; }
    .search-area input { flex:1; padding:10px; border:1px solid #ccc; border-radius:4px; }
    .search-area select { width:150px; padding:10px; border:1px solid #ccc; border-radius:4px; }
    .search-area button { padding:10px 16px; border:none; background:#007acc; color:#fff; border-radius:4px; cursor:pointer; }
    .panel { margin-top:20px; }
    .summary { background:#f0f0f0; padding:10px; border-radius:4px; margin-top:10px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <div class="container">
    <h1>豆包 AI 问答示例</h1>
    <div class="search-area">
      <input id="userInput" placeholder="请输入要解决的问题，例如：用Python实现快速排序">
      <select id="langSelect">
        <option value="python">Python</option>
        <option value="java">Java</option>
        <option value="cpp">C++</option>
        <option value="javascript">JavaScript</option>
        <option value="go">Go</option>
      </select>
      <button id="searchBtn">生成答案</button>
    </div>
    <div id="results"><div style="color:#888">请输入问题后点击“生成答案”</div></div>
  </div>

 <script>
  const DOUBAO_API = "https://ark.cn-beijing.volces.com/api/v3/chat/completions";

  document.getElementById("searchBtn").addEventListener("click", async () => {
    const problem = document.getElementById("userInput").value.trim();
    const lang = document.getElementById("langSelect").value;
    const resultsDiv = document.getElementById("results");

    if (!problem) return alert("请输入问题描述");

    resultsDiv.innerHTML = `<div style="color:#555">思考中，请稍候...</div>`;

    try {
      const response = await fetch(DOUBAO_API, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer 12d2ef09-41ae-4668-8cdf-ee01e99ed055" // ⚠️换成你自己的 Token
        },
        body: JSON.stringify({
          model: "doubao-seed-1-6-251015",
          messages: [
            {
              role: "user",
              content: [
                { type: "text", text: `请使用 ${lang} 语言解决以下问题：${problem}，直接给出具体代码。` }
              ]
            }
          ]
        })
      });

      const data = await response.json();
      console.log(data); // ✅ 调试用，打印完整响应

      const text = data.choices?.[0]?.message?.content || "（未获取到回答）";

      resultsDiv.innerHTML = `
        <div class="panel">
          <h3>豆包回答</h3>
          <div class="summary">${text}</div>
        </div>
      `;
    } catch (err) {
      resultsDiv.innerHTML = `<div style="color:red">调用失败：${err.message}</div>`;
    }
  });
</script>
